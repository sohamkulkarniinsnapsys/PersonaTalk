# Backend Configuration - Copy to .env and fill in your values

# ============================================================================
# AI Mode & Providers
# ============================================================================
AI_MODE=live                           # Use 'live' for real providers, 'mock' for testing
STT_PROVIDER=sarvam                    # Speech-to-text: sarvam, groq, whisper, keyword
TTS_PROVIDER=coqui                     # Text-to-speech: coqui (offline), mock
SARVAM_RESAMPLE_16K=True              # Sarvam docs: "works best with 16kHz" - MUST be True

# ============================================================================
# API Keys
# ============================================================================
SARVAM_API_KEY=your_sarvam_key_here   # Get from https://console.sarvam.ai
GROQ_API_KEY=your_groq_key_here       # Get from https://console.groq.com

# ============================================================================
# Voice Activity Detection (VAD) - Turn-Based Interaction
# ============================================================================
# These settings control when user speech is detected and sent to STT

VAD_START_THRESHOLD=500               # Energy level to detect speech START (0-32767)
VAD_CONTINUE_THRESHOLD=250            # Energy level to keep recording AFTER start
VAD_SILENCE_DURATION_MS=2500          # Must be 2500+ ms (2.5s) to prevent mid-thought cutoff
VAD_MAX_UTTERANCE_MS=20000            # Max recording time (20s = allow longer sentences, was 8s)
VAD_POST_AI_GRACE_MS=1200             # Grace period after AI finishes (ms to ignore echo)
VAD_MIN_CONSECUTIVE_VOICED=3          # Frames of speech needed before accepting as real speech
VAD_MIN_VOICED_FRAMES=15              # Min frames before allowing STT call (prevents artifacts)
VAD_MIN_SPEECH_BUFFER_MS=500          # Min 500ms of speech before finalizing (was causing empty transcripts)

# ============================================================================
# STT (Sarvam) Configuration
# ============================================================================
SARVAM_INPUT_CODEC=pcm_s16le          # PCM 16-bit signed little-endian (standard)
SARVAM_LANGUAGE_CODE=en-IN            # Indian English (hardcoded - best for Hindi-English mix)

# ============================================================================
# TTS (Coqui) Configuration
# ============================================================================
COQUI_MODEL_NAME=tts_models/en/vctk/vits   # VITS model (multi-speaker, faster)
COQUI_GPU=true                        # Use GPU if available
TTS_PROVIDER=coqui                    # Force Coqui for offline synthesis
TTS_TIMEOUT_MS=60000                  # Timeout for TTS synthesis (60 seconds)

# ============================================================================
# LLM (Groq) Configuration
# ============================================================================
GROQ_MODEL=llama-3.3-70b-versatile    # Current best model for conversations
GROQ_API_URL=https://api.groq.com     # Groq API endpoint
GROQ_TEMP=0.2                         # Temperature: 0.2 for deterministic, 0.7 for creative

# ============================================================================
# Django
# ============================================================================
DEBUG=False                           # Set to False in production
SECRET_KEY=your-secret-key-here       # Django secret key
ALLOWED_HOSTS=localhost,127.0.0.1     # Allowed hosts for this Django app

# ============================================================================
# Database
# ============================================================================
DATABASE_URL=sqlite:///db.sqlite3     # SQLite for development (use PostgreSQL in production)

# ============================================================================
# Frontend (Next.js)
# ============================================================================
NEXT_PUBLIC_API_URL=http://localhost:8000    # Backend API URL
NEXT_PUBLIC_WS_URL=ws://localhost:8000       # WebSocket URL for signaling

# ============================================================================
# Logging
# ============================================================================
LOGLEVEL=INFO                         # DEBUG, INFO, WARNING, ERROR
